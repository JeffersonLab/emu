<?xml version="1.0"?>
<!--
  ~ Copyright (c) 2010, Jefferson Science Associates
  ~
  ~ Thomas Jefferson National Accelerator Facility
  ~ Data Acquisition Group
  ~
  ~ 12000, Jefferson Ave, Newport News, VA 23606
  ~ Phone : (757)-269-7100
  ~
  -->

<component name="Eb1">
    <transports>
        <!--
            "name" is the name of the transport.
            "class" is the suffix of the java class defining this transport object.

            for ET system transport objects ...
            
                "etName" is the name of the ET system to create and/or open.
                "create" , if true, will create the specified ET system if it does not already exist
                           and destroy it if it was created and this EMU quits.
                "port"  is the ET system's TCP server port.
                "bPort" is the ET system's broadcast or UDP port.
                "wait"  is the number of seconds to wait for the ET system to appear before timing out.
                "bAddr" is the broadcast address to use.
                "mAddr" is the multicast address to use.

                if not creating the ET system ...

                  "host" is the name of the ET system's host computer or "local", "remote", or "anywhere" if unknown.
                  "method" is the type of connection to the ET system, "direct", "cast", "bcast", or "mcast".

                else if creating the ET system ...

                  "groups" is the number of same-sized groups to separate the events into (for multiple producers).
                  "eventNum" is the number of events.
                  "eventSize" is the size of each event in bytes.
                  "sendBuf" is the size of the TCP send buffer in bytes.
                  "recvBuf" is the size of the TCP receive buffer in bytes.
        -->
        <!--
        to connect to an existing system, one might try ...
        <server name="EmuInputET"  class="Et" etName="/tmp/emuIn"  host="local" method="direct" port="12347"/>
        <server name="EmuET"  class="Et" etName="/tmp/emuTest" create="true"
                port="12347" eventNum="3000" eventSize="16384" groups="2" wait="10" />
        -->
        <!--
        <server name="InET" class="Et" etName="/tmp/Eb1" host="local" method="direct" port="12347" uPort="11112" wait="5"/>
        -->
        <server name="InET" class="Et" etName="/tmp/test" create="true"
                port="11111" uport="12347" eventNum="100" eventSize="128" groups="2" wait="0" />
         <!--
           <server name="InET"   class="Et" etName="/tmp/Eb1" create="false" uPort="11112"
                port="12347" eventNum="1000" eventSize="2100000" groups="2" wait="5"
                recvBuf="3000000" sendBuf="130000"/>
             -->
              <!--
       <server name="InET" class="Et" etName="/tmp/Eb1" method="direct" host="172.17.4.54" port="12347" uPort="11112" wait="5"/>
               -->
  </transports>
    <modules src="modules.jar" usr_src="user_modules.jar">
        <!--
            "threads" is the number of event building threads to run at one time.
            "statistics=on" means that if there are multiple modules defined, this module's statistics
                 may be reported to runcontrol as being representative of everything.
            "class" is the name of the java class defining this module and is dynamically loaded.
            "id" is the id number of this module and is used as the unique event builder id if
                 this module is building events.
            "tsCheck=off" means timestamp consistency checking is turned off, default is on.
            "tsSlop=4" means for a single event, max timestamp differences is 4 ticks, default is 2.
            <EbModule class="EventBuilding2" id="1" threads="3" statistics="on">
        -->
        <EbModule class="EventBuilding" id="1" threads="3" statistics="on">
            <!--
                "name" is the name of the channel.
                "transp" is the name of the transport type defined above.
                "id" attribute is the rocId or sourceId and allows this module to check incoming events
                     to make sure they have the correct id specified.
                "endian" specifies the endianness of the bytes going over the output channel,
                     and may = big or little.
                "capacity" sets the queue size for the channel

                For ET system channels only:
                "group" sets from which group to obtain events from ET
                "chunk" sets the number of events asked for in one array
                "stationName" sets the name of the station to attach to
                "position" sets the position of any station either created or existing (besides GrandCentral)
                "idFilter" filters so only events with the given id are accepted into the station if on
                "sendBuf" is the size of the TCP send buffer in bytes.
                "recvBuf" is the size of the TCP receive buffer in bytes.
                noDelay="on" turns the TCP_NODELAY option on, off is default
            -->
            <inchannel  id="1" name="Roc1" transp="InET" stationName="stat1" position="1"
                        ithreads="3" idFilter="on" capacity="12" chunk="1"/>
        </EbModule>
    </modules>
</component>

