<?xml version="1.0"?>
<!--
  ~ Copyright (c) 2008, Jefferson Science Associates
  ~
  ~ Thomas Jefferson National Accelerator Facility
  ~ Data Acquisition Group
  ~
  ~ 12000, Jefferson Ave, Newport News, VA 23606
  ~ Phone : (757)-269-7100
  ~
  -->

<component name="SingleEmu">
    <transports>
        <server name="SingleEmu_SOCKET" class="Cmsg" udl="cMsg://localhost/cMsg/test"/>
        <client name="BitBucket_SOCKET" class="Cmsg" udl="cMsg://localhost/cMsg/test"/>
    </transports>
    <modules src="modules.jar" usr_src="user_modules.jar">
        <!--
        <InModule class="ProcessTest">
            <inchannel name="ROC1" transp="SingleEmu_SOCKET"/>
            <outchannel name="F1" transp="Fifo"/>
        </InModule>
        -->
        <CarlsModule class="ProcessTest" statistics="on">
            <!--
                parseDepth=2 means we can see a data transport record's banks (including payload banks)
                and what's in the payload banks, but does not allow us to see what is inside those payload
                (physics or ROC raw) banks. This means later on another parse must be done on
                ROC raw records to pick apart their trigger banks.
                The "id" attribute is the rocId or sourceId and allows this module to check incoming events
                to make sure they have the correct id specified.
                The "subject" & "type" attributes override the default subscriptions to receive msg over cmsg.
                The default is subject = name, type="*".
            -->
            <inchannel  id="1" name="ROC1"      transp="SingleEmu_SOCKET" subject="ROC1" type="a" parseDepth="2"/>
            <inchannel  id="2" name="ROC2"      transp="SingleEmu_SOCKET" subject="ROC2" type="b" parseDepth="2"/>
            <outchannel        name="BitBucket" transp="SingleEmu_SOCKET" endian="little"/>
        </CarlsModule>
        <!--
        <OutModule class="ProcessTest">
            <inchannel name="F2" transp="Fifo"/>
            <outchannel name="BitBucket" transp="BitBucket_SOCKET" endian="little"/>
        </OutModule>
        -->
    </modules>
</component>

