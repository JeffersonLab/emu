<?xml version="1.0"?>
<!--
  ~ Copyright (c) 2010, Jefferson Science Associates
  ~
  ~ Thomas Jefferson National Accelerator Facility
  ~ Data Acquisition Group
  ~
  ~ 12000, Jefferson Ave, Newport News, VA 23606
  ~ Phone : (757)-269-7100
  ~
  -->

<component name="EMU1">
    <transports>
        <!--
            "name" is the name of the transport.
            "class" is the suffix of the java class defining this transport object.

            for ET system transport objects ...
            
                "etName" is the name of the ET system to create and/or open.
                "create" , if true, will create the specified ET system if it does not already exist
                           and destroy it if it was created and this EMU quits.
                "port"  is the ET system's TCP server port.
                "mPort" is the ET system's multicast port.
                "bPort" is the ET system's broadcast or UDP port.
                "wait"  is the number of seconds to wait for the ET system to appear before timing out.

                if not creating the ET system ...

                  "host" is the name of the ET system's host computer or "local", "remote", or "anywhere" if unknown.
                  "method" is the type of connection to the ET system, "direct", "cast", "bcast", or "mcast".

                else if creating the ET system ...

                  "groups" is the number of same-sized groups to separate the events into (for multiple producers).
                  "eventNum" is the number of events.
                  "eventSize" is the size of each event in bytes.
        -->
        <!--
        to connect to an existing system, one might try ...
        <server name="EmuInputET"  class="Et" etName="/tmp/emuIn"  host="local" method="direct" port="12347"/>
        -->
        <server name="EmuInputET"  class="Et" etName="/tmp/emuIn" create="true"
                port="12347" groups="4" eventNum="16000" eventSize="2048" wait="10" />
        <client name="EmuOutputET" class="Et" etName="/tmp/emuOut" host="local" method="direct" port="12349" wait="10"/>
    </transports>
    <modules src="modules.jar" usr_src="user_modules.jar">
        <!--
        <InModule class="ProcessTest">
            <inchannel  name="ROC1" transp="EmuInputET"/>
            <outchannel name="F1" transp="Fifo"/>
        </InModule>
        -->
        <!--
            "threads" is the number of event building threads to run at one time.
            "statistics=on" means that if there are multiple modules defined, this module's statistics
                 may be reported to runcontrol as being representative of everything.
            "class" is the name of the java class defining this module and is dynamically loaded.
            "id" is the id number of this module and is used as the unique event builder id if
                 this module is building events.
        -->
        <CarlsModule class="EventBuilding" id="7" threads="3" statistics="on">
            <!--
                "name" is the name of the channel.
                "transp" is the name of the transport type defined above.
                "id" attribute is the rocId or sourceId and allows this module to check incoming events
                     to make sure they have the correct id specified.
                "subject" & "type" attributes override the default subscriptions to receive msgs thru cmsg.
                     The default is subject = name, type="*". Only used for transport class = "cmsg".
                "endian" specifies the endianness of the bytes going over the output channel,
                     and may = big or little.
                "capacity" sets the queue size for the channel

                For ET system channels only:
                "size" is the size (bytes) of the requested new ET buffers used in output of built events
                "chunk" sets the number of events asked for in one array
                "stationName" sets the name of the station to attach to
                "position" sets the position of any station either created or existing (besides GrandCentral)
            -->
            <inchannel  id="1" name="ROC1"      transp="EmuInputET" />
            <inchannel  id="2" name="ROC2"      transp="EmuInputET" />
            <inchannel  id="3" name="ROC3"      transp="EmuInputET" />
            <outchannel        name="BitBucket" transp="EmuOutputET" size="8192" chunk="300" capacity="600"/>
        </CarlsModule>
        <!--
        <OutModule class="ProcessTest">
            <inchannel  name="F2" transp="Fifo"/>
            <outchannel name="BitBucket" transp="EmuOutputET" endian="little"/>
        </OutModule>
        -->
    </modules>
</component>

